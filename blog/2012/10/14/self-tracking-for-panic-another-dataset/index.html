
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,400italic,500,500italic' rel='stylesheet' type='text/css'>
  <meta charset="utf-8">
  <title>Self-Tracking for Panic: Another Dataset - Quantified Savagery</title>
  <meta name="author" content="Evan Savage">

  
  <meta name="description" content="In this post, I perform the same analyses presented in
my last post using data from my second panic tracking period.
I then test whether my average &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.savageevan.com/blog/2012/10/14/self-tracking-for-panic-another-dataset/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- see http://luikore.github.com/2011/09/good-things-learned-from-octopress/ -->
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$', '$'] ],
      displayMath: [ ['$$', '$$']],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
  });
  </script>
  <script type="text/javascript"
     src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link href="/atom.xml" rel="alternate" title="Quantified Savagery" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34927069-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Quantified Savagery</a></h1>
  
    <h2>Where Personal Data Runs Wild</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.savageevan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Self-Tracking for Panic: Another Dataset</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-14T21:23:00-07:00" pubdate data-updated="true">Oct 14<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In this post, I perform the same analyses presented in
<a href="/blog/2012/10/09/self-tracking-for-panic-an-even-deeper-look/">my last post</a> using data from my second panic tracking period.
I then test whether my average alcohol and sugar consumption changed
measurably between the two tracking periods.</p>

<p>During the second tracking period, I gathered data using
<a href="https://github.com/candu/qs-counters">qs-counters</a>, a simple utility I built for reducing friction in
the recording process.</p>

<!-- more -->

<h2 id="the-usual-suspects">The Usual Suspects</h2>

<h3 id="linear-regression">Linear Regression</h3>

<p>During the second tracking period, <em>alcohol consumption remained
relatively constant</em>:</p>

<p><img src="https://lh4.googleusercontent.com/-Kha5L6BVqUo/UHxN-lFh_LI/AAAAAAAAADY/eVVLWJbYMaU/s640/qs-counters-alcohol.jpg" title="Alcohol Consumption" /></p>

<p>Sugar consumption is a different story, with a <em>pronounced negative trend</em>:</p>

<p><img src="https://lh6.googleusercontent.com/-MN60bkN-thg/UHxN_qhP-AI/AAAAAAAAADo/HXsmUbqEWnw/s640/qs-counters-sweets.jpg" title="Sugar Consumption" /></p>

<p>The evidence to suggest that <em>my alcohol and sugar consumption are linked</em> is
also much stronger now:</p>

<p><img src="https://lh5.googleusercontent.com/-9J_fMxZS2Co/UHxOAaijDbI/AAAAAAAAAD4/UDt5xjzZ-Lw/s640/qs-counters-alcohol-vs-sugar.jpg" title="Alcohol vs. Sugar Consumption" /></p>

<p>On the other hand, the previous-day alcohol effect seems to be
non-existent:</p>

<p><img src="https://lh6.googleusercontent.com/-8CPpr0mjczs/UHxOABjFKSI/AAAAAAAAADw/4sVdt2axAEs/s640/qs-counters-alcohol-today-vs-yesterday.jpg" title="Alcohol: Today vs. Yesterday" /></p>

<h3 id="fast-fourier-transform">Fast Fourier Transform</h3>

<p>With more data points, the FFT frequency amplitude plot is more muddled:</p>

<p><img src="https://lh4.googleusercontent.com/-1AeQyUEEW8o/UHxN90Wk75I/AAAAAAAAADM/eJs5x6UaQNI/s640/qs-counters-fft-frequencies.jpg" title="FFT Frequencies" /></p>

<p>The 2-day and 7-day effects previously “discovered” are nowhere to be
found.</p>

<h3 id="maximum-entropy-modelling">Maximum Entropy Modelling</h3>

<p>I didn’t record panic attacks during this tracking period. My previous
efforts reduced the severity and frequency of these attacks drastically,
enough so that the data here would have been extremely sparse.</p>

<p>In the absence of that data, I asked a different question:</p>

<blockquote><p>What features best predict my exercise patterns?</p></blockquote>

<p>Here are the top features from <code>MaxentClassifier</code>:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class=""><span class="line">3.369 caffeine==True and label is 'no-exercise'
</span><span class="line">  -0.739 sweets==True and label is 'exercise'
</span><span class="line">   0.399 sweets==True and label is 'no-exercise'
</span><span class="line">  -0.201 alcohol==True and label is 'exercise'
</span><span class="line">   0.166 alcohol==True and label is 'no-exercise'
</span><span class="line">   0.161 relaxation==True and label is 'exercise'
</span><span class="line">  -0.092 relaxation==True and label is 'no-exercise'</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The caffeine finding is misleading. On one of the two days where I entered
non-zero caffeine consumption, that was due to a <em>mistake in data entry.</em>
(Side note to self: all tools should include an undo feature!) Aside from
that, <em>sugar consumption appears to have the strongest negative effect on
exercise.</em></p>

<h2 id="students-t-test">Student’s t-test</h2>

<h3 id="what">What?</h3>

<p>Student’s t-test answers this question:</p>

<blockquote><p>Are these samples significantly different?</p></blockquote>

<p>More formally, the t-test answers a statistical question about normal
distributions: given
$ X \sim \mathcal{N}(\mu_X, \sigma_X^2) $ and
$ Y \sim \mathcal{N}(\mu_Y, \sigma_Y^2) $,
does $ \mu_X = \mu_Y $?</p>

<p>If we let $ Y $ be a known normal distribution centered at
rather than taking it from an empirical sample,
we also obtain a one-sample t-test for the null hypothesis
$ \mu_X = \mu_Y $.</p>

<h3 id="why">Why?</h3>

<p>In a self-tracking context, you might ask the following questions:</p>

<ul>
  <li>Did I improve significantly across tracking periods?</li>
  <li>Is my behavior consistent across tracking periods?</li>
</ul>

<p>Student’s t-test can help address both questions.</p>

<h3 id="the-data">The Data</h3>

<p>Before using Student’s t-test on my alcohol and sugar consumption data from
the two tracking periods, I <em>check whether these samples have a roughly
normal distribution.</em> The code for normality checking is
<a href="https://github.com/candu/quantified-savagery-files/blob/master/Panic/qs-counters/counters_normality.py">here</a>.</p>

<p>It helps to <em>visualize the histogram data first</em>:</p>

<p><img src="https://lh5.googleusercontent.com/-1sX3PJfuiAg/UHxdvv_-mkI/AAAAAAAAAEc/Rm7uknNlG7g/s640/recovery-journal-alcohol-histogram.jpg" title="Alcohol Histogram (recovery-journal)" />
<img src="https://lh5.googleusercontent.com/-9ScCbHMq4ls/UHxdu40NnPI/AAAAAAAAAEM/3SRyqPF_Bh8/s640/qs-counters-alcohol-histogram.jpg" title="Alcohol Histogram (qs-counters)" /></p>

<p><img src="https://lh3.googleusercontent.com/-10RnNsKZAS0/UHxdvzkHVhI/AAAAAAAAAEg/QCgl_8vd4Go/s640/recovery-journal-sweets-histogram.jpg" title="Sugar Histogram (recovery-journal)" />
<img src="https://lh6.googleusercontent.com/-c407cdWckp0/UHxdvMT5GJI/AAAAAAAAAEU/_xR3qO3ZMX0/s640/qs-counters-sweets-histogram.jpg" title="Sugar Histogram (qs-counters)" /></p>

<p>These don’t look particularly close to normal distributions, but it’s hard to
tell with discrete-valued data. For more evidence, I use the
<a href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.shapiro.html">Shapiro-Wilk statistical normality test</a>:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">alcohol, recovery-journal:  (0.944088339805603, 0.10709714889526367)
</span><span class="line">alcohol, qs-counters:  (0.8849299550056458, 4.6033787270971516e-07)
</span><span class="line">sugar, recovery-journal:  (0.722859263420105, 2.5730114430189133e-06)
</span><span class="line">sugar, qs-counters:  (0.8092769384384155, 8.38931979441071e-10)</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The null hypothesis for Shapiro-Wilk is that the sample is normally distributed,
so these low p-values indicate the opposite: <em>my data isn’t normally distributed!</em>
Bad news for my attempt to use Student’s t-test here.</p>

<p>Nevertheless, I’ll barge ahead and run the t-test anyways, just to see what
that process looks like with <code>scipy.stats</code>. The code for t-testing is
<a href="https://github.com/candu/quantified-savagery-files/blob/master/Panic/qs-counters/counters_ttest.py">here</a>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class=""><span class="line">alcohol
</span><span class="line">==========
</span><span class="line">avg(A) = 3.26
</span><span class="line">avg(B) = 2.35
</span><span class="line">(t, p) = (2.0721, 0.0469)
</span><span class="line">
</span><span class="line">sweets
</span><span class="line">==========
</span><span class="line">avg(A) = 1.19
</span><span class="line">avg(B) = 1.23
</span><span class="line">(t, p) = (-0.1969, 0.8453)</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>If the t-test were useful for this data, it would show that <em>my alcohol
consumption was significantly lower during the second tracking period.</em>
With such a large drop in average consumption, I’m willing to say that
this is a reasonable assertion.</p>

<h2 id="a-question-of-motivation">A Question Of Motivation</h2>

<p>By this point, you might be asking:</p>

<blockquote><p>Why did I even bother with all this analysis when I have so few data points?</p></blockquote>

<p>Good question! The short answer? It’s a <em>learning opportunity.</em> The longer
answer is backed by a chain of reasoning:</p>

<ul>
  <li>As data collection gets easier, <em>the value of data analysis goes up;</em></li>
  <li>Statistical analysis is <em>hard to impossible</em> for the average user, so <em>they
will use whatever tools they can get</em> from app markets and device vendors;</li>
  <li>Most of those tools are built by people who, by trade, are software
developers;</li>
  <li>Most developers, even good ones, are typically not that great in the
statistics and data analysis department;</li>
  <li>Therefore, as a developer with plans to build self-tracking tools, <em>I owe it
to myself and my future users to know this stuff better.</em></li>
</ul>

<p>As it turns out, data analysis is hard, period. Picking the right tools is
difficult, and picking the wrong ones (like the t-test above!) <em>can easily
produce results that appear to be meaningful but are not.</em> In a self-tracking
scenario, this problem is often made worse by <em>smaller datasets</em> and <em>uncontrolled
conditions.</em></p>

<h2 id="thought-experiments">Thought Experiments</h2>

<h3 id="repeat-yourself-a-reflection-on-self-tracking-and-science">Repeat Yourself: A Reflection On Self-Tracking And Science</h3>

<p>One criticism often launched at the Quantified Self community is that
self-tracking is not <em>scientific</em> enough. For an interesting discussion
of the merits and drawbacks of presenting self-experimentation as science,
I highly recommend the <a href="http://www.escholarship.org/uc/item/2xc2h866#page-36">Open Peer Commentary section</a>
of <a href="http://www.escholarship.org/uc/item/2xc2h866">this paper</a>. Some of
the broader themes in this debate are also summarized
<a href="http://quantifiedself.com/2012/05/qs-101-the-science-of-self-experimentation/">here</a> on
the Quantified Self website.</p>

<p>To be fair, there are a host of valid concerns here. For starters,
<em>it’s very difficult to impose a controlled environment when self-tracking.</em>
In a Heisenbergian twist, being mindful of your behavior could modify the
behavior you’re trying to measure; this effect is discussed briefly by
<a href="http://www.escholarship.org/uc/item/2xc2h866#page-45">Simon Moore and Joselyn Sellen</a>.</p>

<p>Additionally, a sample population of one is meaningless. Will your
approaches work for others? Did you gather the data in a consistent
manner? Are your sensors working properly? The usual antidote is to
increase the sample population, but then you have another set of problems.
Are all participants using the same sensors in the same way? Are they all
running the same analyses?</p>

<p>From watching several presentations about self-tracking, there is a
curious pattern:</p>

<blockquote><p>Like any other habit, the tracking habit is hard to maintain.</p></blockquote>

<p>As a corollary, many tracking experiments consist of multiple
tracking periods, these punctuated by relapses of the tracking habit.</p>

<p>Many people interpret these relapses as failures, but they’re actually
<em>amazing scientific opportunities!</em> These are chances to re-run the same
experiment, verifying or confounding results from your earlier tracking
periods.</p>

<h3 id="the-predictive-modelling-game">The Predictive Modelling Game</h3>

<p>Predictive modelling could be an interesting component of a habit
modification system. Suppose I want to exercise more regularly. First, 
I <em>select several features that seem likely to influence my exercise
patterns</em>, such as:</p>

<ul>
  <li>Am I travelling? Where am I?</li>
  <li>What foods did I eat? When? How much?</li>
  <li>How positive or negative is my mood?</li>
  <li>Did I schedule time today to exercise?</li>
  <li>Did I exercise yesterday? How much?</li>
</ul>

<p>Next, I <em>gather some baseline data</em> by tracking these features along with
my exercise patterns. I then use that data to <em>train a classifier.</em>
Finally, I keep tracking the features, ask the classifier to predict my
exercise activity, and play a simple game with myself:</p>

<blockquote><p>Can I beat the classifier?</p></blockquote>

<p>That is, <em>can I exercise more often than my existing behavior patterns
suggest I should?</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Evan Savage</span></span>

      








  


<time datetime="2012-10-14T21:23:00-07:00" pubdate data-updated="true">Oct 14<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/panic/'>Panic</a>, <a class='category' href='/blog/categories/technical/'>Technical</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.savageevan.com/blog/2012/10/14/self-tracking-for-panic-another-dataset/" data-via="candusavage" data-counturl="http://blog.savageevan.com/blog/2012/10/14/self-tracking-for-panic-another-dataset/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/10/09/self-tracking-for-panic-an-even-deeper-look/" title="Previous Post: Self-Tracking For Panic: A Deeper Look">&laquo; Self-Tracking For Panic: A Deeper Look</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/10/17/fitbit-apis-crossfilter-and-d3/" title="Next Post: Fitbit: APIs, crossfilter, and d3.js">Fitbit: APIs, crossfilter, and d3.js &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/04/another-quadtree-map-rendering/">Another Quadtree Map Rendering</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/21/quadtree-cartography/">Quadtree Cartography</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/07/applying-genetic-research-to-my-23andme-data/">Applying Genetic Research To My 23andMe Data</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/04/the-behavioral-economics-of-23andme-results/">The Behavioral Economics of 23AndMe Results</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/31/what-ill-look-like-in-50-years/">What I'll Look Like In 50 Years</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/candu">@candu</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'candu',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("candusavage", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/candusavage" class="twitter-follow-button" data-show-count="false">Follow @candusavage</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Evan Savage -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
